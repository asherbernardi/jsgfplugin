plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.4.18'
    id 'antlr'
}

group 'com.asherbernardi'
version '1.0.4'

patchPluginXml {
    pluginDescription '''
<p>This is a plugin for all JetBrains IDEs to support the JSGF file format.</p>
<ul>
    <li> syntax highlighting
    <li> syntax error checking
    <li> semantic error checking
    <li> go to declaration
    <li> find usages
    <li> automatic renaming
    <li> parenthesis, bracket, brace, and angle bracket matching
    <li> search for symbol includes all declared rule names
    <li> view structure
    <li> code completion
</ul>'''
    changeNotes "Supports newest IntelliJ version 2020.3"
    sinceBuild "193"
    untilBuild "2020.*"
}

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

// Include the generated files in the source set
sourceSets.main.java.srcDirs 'src/main/antlr'

dependencies {
    antlr("org.antlr:antlr4:4.8") { // use ANTLR version 4
        exclude group:'com.ibm.icu', module:'icu4j'
    }
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile "org.antlr:antlr4-intellij-adaptor:0.1"
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version '2020.3'
}

generateGrammarSource {
    arguments += ["-package", "com.asherbernardi.jsgfplugin", "-Xexact-output-dir"]
}

publishPlugin {
    token intellijPublishToken
}